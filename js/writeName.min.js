let backImage,btnGoToPlay;var bmd;let key_backspace,key_intro;var playerName;let botonNombre1,botonNombre2,botonNombre3,textoNombre1,textoNombre2,textoNombre3,predefinidos=["Captain Rogers","Useless Ironman","I am a person"],writeNameState={preload:preloadWN,create:createWN};function preloadWN(){game.load.image("backImage","assets/imgs/New enviroment/BackGrounds/Background.png"),game.load.image("botonback","assets/imgs/New UI/PNG/Buttons/Back.png"),game.load.image("boton","assets/imgs/New UI/PNG/Pause/Table.png"),game.load.audio("Standard_Click_Sound","assets/audio/Standard_Click_Sound.wav"),game.load.audio("Back_Click_Sound","assets/audio/Back_Click_Sound.wav")}function createWN(){console.log("Pantalla Escribe Nombre"),backImage=game.add.image(-50,0,"backImage"),backImage.scale.setTo(.35,.35);let textInfo1=game.add.text(10,50,"Choose a user name: ",style),textInfo2=game.add.text(20,400,"Or write your name: ",style),alturasbotones=[100,200,300],desplazamientoAdicionalTexto=22;botonNombre1=game.add.button(20,alturasbotones[0],"boton",escribirPredefinido1),textoNombre1=game.add.text(50,alturasbotones[0]+22,predefinidos[0],style),botonNombre2=game.add.button(20,alturasbotones[1],"boton",escribirPredefinido2),textoNombre2=game.add.text(50,alturasbotones[1]+22,predefinidos[1],style),botonNombre3=game.add.button(20,alturasbotones[2],"boton",escribirPredefinido3),textoNombre3=game.add.text(50,alturasbotones[2]+22,predefinidos[2],style),btnGoToPlay=game.add.button(39,650,"botonback",startPlay),(bmd=game.make.bitmapData(400,800)).context.font="64px Arial",bmd.context.fillStyle="#ffffff",bmd.context.fillText(playerName,60,562),bmd.addToWorld(),key_backspace=game.input.keyboard.addKey(Phaser.Keyboard.BACKSPACE),key_backspace.onDown.add(borrarLetra,this),key_intro=game.input.keyboard.addKey(Phaser.Keyboard.ENTER),key_intro.onDown.add(startPlay,this),game.input.keyboard.addCallbacks(this,null,null,keyPress),null!=playerName&&changeName()}function borrarLetra(){playerName=playerName.substring(0,playerName.length-1),changeName()}function escribirPredefinido1(){standard_click_sound.play(),playerName=predefinidos[0],changeName()}function escribirPredefinido2(){standard_click_sound.play(),playerName=predefinidos[1],changeName()}function escribirPredefinido3(){standard_click_sound.play(),playerName=predefinidos[2],changeName()}function keyPress(char){null==playerName&&(playerName=""),playerName.length<20&&(playerName+=char),changeName()}function changeName(){bmd.cls(),playerName.length<7?bmd.context.font="64px Arial":playerName.length<11?bmd.context.font="50px Arial":playerName.length<15?bmd.context.font="40px Arial":bmd.context.font="35px Arial";for(var x=60,i=0;i<playerName.length;i++){var letra=playerName.charAt(i);bmd.context.fillText(letra,x,562),x+=bmd.context.measureText(letra).width}}function startPlay(){back_click_sound.play(),null!=playerName&&""!=playerName&&game.state.start("start")}